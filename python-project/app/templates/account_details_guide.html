{% extends "layout.html" %}
{% block title %}Account Details API — {{ app_name }}{% endblock %}
{% block page_title %}Account Details API{% endblock %}
{% block content %}

<div class="max-w-5xl mx-auto space-y-6">

    <!-- Introduction -->
    <div class="bg-surface-900 border border-surface-800 rounded-2xl">
        <div class="px-6 py-5 border-b border-surface-800 flex flex-row items-center gap-3">
            <i data-lucide="book-open" class="w-5 h-5 text-brand-400 flex-shrink-0"></i>
            <h3 class="text-base font-semibold text-white">Overview</h3>
        </div>
        <div class="p-6 space-y-4">
            <p class="text-sm text-surface-300 leading-relaxed">
                The {{ app_name }} Account Details API returns the <strong class="text-white">current state</strong> of your TradeLocker trading account —
                balance, equity, available funds, margin, PnL, and more.
                The data comes from TradeLocker's <span class="font-mono text-brand-400">/trade/accounts/{accountId}/state</span> endpoint, with field names
                automatically resolved from the <span class="font-mono text-brand-400">/trade/config</span> route.
                You get a full named summary or request individual fields.
            </p>
            <div class="flex flex-row items-start gap-3 bg-surface-800/50 border border-surface-700 rounded-xl p-4">
                <i data-lucide="info" class="w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"></i>
                <p class="text-sm text-surface-300">
                    Find your API key on the <a href="/settings" class="text-brand-400 hover:text-brand-300 underline">Settings</a> page.
                    Your Arrissa Account IDs are shown on the <a href="/dashboard" class="text-brand-400 hover:text-brand-300 underline">Dashboard</a> and <a href="/brokers" class="text-brand-400 hover:text-brand-300 underline">Brokers</a> pages.
                </p>
            </div>
        </div>
    </div>

    <!-- Authentication -->
    <div class="bg-surface-900 border border-surface-800 rounded-2xl">
        <div class="px-6 py-5 border-b border-surface-800 flex flex-row items-center gap-3">
            <i data-lucide="shield" class="w-5 h-5 text-brand-400 flex-shrink-0"></i>
            <h3 class="text-base font-semibold text-white">Authentication</h3>
        </div>
        <div class="p-6 space-y-4">
            <p class="text-sm text-surface-300 leading-relaxed">
                Every request must include your API key. You can pass it in two ways:
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                    <p class="text-xs font-semibold text-surface-400 uppercase tracking-wider mb-2">Header</p>
                    <code class="text-sm font-mono text-brand-400">X-API-Key: your_api_key</code>
                </div>
                <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                    <p class="text-xs font-semibold text-surface-400 uppercase tracking-wider mb-2">Query Parameter</p>
                    <code class="text-sm font-mono text-brand-400">?api_key=your_api_key</code>
                </div>
            </div>
        </div>
    </div>

    <!-- GET /api/account-details -->
    <div class="bg-surface-900 border border-surface-800 rounded-2xl">
        <div class="px-6 py-5 border-b border-surface-800 flex flex-row items-center justify-between">
            <div class="flex flex-row items-center gap-3">
                <span class="text-xs font-bold uppercase tracking-wider bg-green-900/40 text-green-400 border border-green-800 px-2.5 py-1 rounded-lg">GET</span>
                <h3 class="text-base font-semibold text-white font-mono">/api/account-details</h3>
            </div>
        </div>
        <div class="p-6 space-y-6">

            <p class="text-sm text-surface-300 leading-relaxed">
                Returns the current account state including balance, equity, available funds, used margin, unrealised PnL, and more.
                Omit <span class="font-mono text-brand-400">field</span> to get all fields, or pass a specific field name to get just that value.
            </p>

            <!-- Parameters Table -->
            <div>
                <p class="text-xs font-semibold text-surface-400 uppercase tracking-wider mb-3">Parameters</p>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="text-xs uppercase tracking-widest text-surface-400 border-b border-surface-800">
                                <th class="text-left py-3 px-4 font-semibold">Name</th>
                                <th class="text-left py-3 px-4 font-semibold">In</th>
                                <th class="text-left py-3 px-4 font-semibold">Required</th>
                                <th class="text-left py-3 px-4 font-semibold">Description</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-surface-800">
                            <tr>
                                <td class="py-3 px-4 font-mono text-sm text-brand-400">api_key</td>
                                <td class="py-3 px-4 text-sm text-surface-300">Header / Query</td>
                                <td class="py-3 px-4"><span class="text-xs px-2 py-0.5 rounded-full bg-red-900/40 text-red-400 font-semibold">Required</span></td>
                                <td class="py-3 px-4 text-sm text-surface-300">Your API key (header: <span class="font-mono text-surface-200">X-API-Key</span>)</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-4 font-mono text-sm text-brand-400">arrissa_account_id</td>
                                <td class="py-3 px-4 text-sm text-surface-300">Header / Query</td>
                                <td class="py-3 px-4"><span class="text-xs px-2 py-0.5 rounded-full bg-red-900/40 text-red-400 font-semibold">Required</span></td>
                                <td class="py-3 px-4 text-sm text-surface-300">Your 6-character account ID (header: <span class="font-mono text-surface-200">X-Arrissa-Account-Id</span>)</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-4 font-mono text-sm text-brand-400">field</td>
                                <td class="py-3 px-4 text-sm text-surface-300">Query</td>
                                <td class="py-3 px-4"><span class="text-xs px-2 py-0.5 rounded-full bg-surface-700 text-surface-300 font-semibold">Optional</span></td>
                                <td class="py-3 px-4 text-sm text-surface-300">Return only this field's value. Omit for full account state.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Available Fields -->
            <div>
                <p class="text-xs font-semibold text-surface-400 uppercase tracking-wider mb-3">Available Fields</p>
                <p class="text-sm text-surface-300 mb-3">
                    Field names are fetched dynamically from TradeLocker's <span class="font-mono text-brand-400">/trade/config</span> endpoint.
                    Pass any field name as <span class="font-mono text-brand-400">?field=</span> to get just that value.
                </p>
                {% if detail_columns %}
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2">
                    {% for col in detail_columns %}
                    <div class="text-center">
                        <span class="block text-xs font-mono px-2 py-1.5 rounded-lg bg-surface-800 border border-surface-700 text-surface-200 truncate" title="{{ col }}">{{ col }}</span>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="flex flex-row items-start gap-3 bg-surface-800/50 border border-surface-700 rounded-xl p-4">
                    <i data-lucide="info" class="w-4 h-4 text-amber-400 flex-shrink-0 mt-0.5"></i>
                    <p class="text-xs text-surface-400">Connect a TradeLocker account to see the available field names. They are fetched live from the config endpoint.</p>
                </div>
                {% endif %}
            </div>

            <!-- Full Summary Response -->
            <div>
                <p class="text-xs font-semibold text-surface-400 uppercase tracking-wider mb-3">Full Summary Response</p>
                <p class="text-sm text-surface-300 mb-3">When no <span class="font-mono text-brand-400">field</span> is specified, all account state values are returned with named keys:</p>
                <pre class="bg-surface-800 border border-surface-700 rounded-xl p-4 text-sm font-mono overflow-x-auto"><code class="language-json">{
  "arrissa_data_HEROFX_live": {
    "arrissa_account_id": "F76161",
    "balance": 392084.93,
    "projectedBalance": 391415.43,
    "availableFunds": 389608.865,
    "blockedBalance": 0,
    "cashBalance": 392084.93,
    "unsettledCash": 0,
    "withdrawalAvailable": 389608.865,
    "stocksValue": 0,
    "optionValue": 0,
    "initialMarginReq": 1806.965,
    "maintMarginReq": 1806.965,
    "marginWarningLevel": 100,
    "blockedForStocks": 0,
    "stockOrdersReq": 0,
    "stopOutLevel": 144,
    "warningMarginReq": 0,
    "marginBeforeWarning": 389608.865,
    "todayGross": -669.5,
    "todayNet": -739.5,
    "todayFees": 1,
    "todayVolume": 0,
    "todayTradesCount": 0,
    "openGrossPnL": 5725.99,
    "openNetPnL": 5585.57,
    "positionsCount": 11,
    "ordersCount": 0
  }
}</code></pre>
                <div class="flex flex-row items-start gap-3 bg-surface-800/50 border border-surface-700 rounded-xl p-4 mt-3">
                    <i data-lucide="info" class="w-4 h-4 text-blue-400 flex-shrink-0 mt-0.5"></i>
                    <p class="text-xs text-surface-400">The root key <span class="font-mono text-brand-400">arrissa_data_{server}_{environment}</span> wraps all responses. Field names may vary by broker — they come from TradeLocker's config.</p>
                </div>
            </div>

            <!-- Single Field Response -->
            <div>
                <p class="text-xs font-semibold text-surface-400 uppercase tracking-wider mb-3">Single Field Response</p>
                <p class="text-sm text-surface-300 mb-3">When you pass <span class="font-mono text-brand-400">?field=balance</span>, only that value is returned:</p>
                <pre class="bg-surface-800 border border-surface-700 rounded-xl p-4 text-sm font-mono overflow-x-auto"><code class="language-json">{
  "arrissa_data_HEROFX_live": {
    "arrissa_account_id": "F76161",
    "field": "balance",
    "value": 392084.93
  }
}</code></pre>
            </div>

            <!-- Examples -->
            <div>
                <p class="text-xs font-semibold text-surface-400 uppercase tracking-wider mb-3">Examples</p>
                <div class="space-y-3">

                    <!-- Example 1: Full State -->
                    <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                        <div class="flex flex-row items-center justify-between mb-2">
                            <p class="text-xs font-semibold text-surface-400">Full account state (all fields)</p>
                            <button onclick="tryExample(this)" class="flex flex-row items-center gap-1.5 text-xs text-brand-400 hover:text-brand-300 transition">
                                <i data-lucide="play" class="w-3.5 h-3.5"></i>
                                <span>Try it</span>
                            </button>
                        </div>
                        <a href="/api/account-details?api_key={{ api_key }}&arrissa_account_id={{ example_account_id }}"
                           target="_blank"
                           class="block font-mono text-sm text-surface-200 hover:text-brand-400 transition break-all">
                            GET /api/account-details?arrissa_account_id=<span class="text-amber-400">{{ example_account_id }}</span>
                        </a>
                    </div>

                    <!-- Example 2: Balance -->
                    <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                        <div class="flex flex-row items-center justify-between mb-2">
                            <p class="text-xs font-semibold text-surface-400">Get account balance only</p>
                            <button onclick="tryExample(this)" class="flex flex-row items-center gap-1.5 text-xs text-brand-400 hover:text-brand-300 transition">
                                <i data-lucide="play" class="w-3.5 h-3.5"></i>
                                <span>Try it</span>
                            </button>
                        </div>
                        <a href="/api/account-details?api_key={{ api_key }}&arrissa_account_id={{ example_account_id }}&field=balance"
                           target="_blank"
                           class="block font-mono text-sm text-surface-200 hover:text-brand-400 transition break-all">
                            GET /api/account-details?arrissa_account_id=<span class="text-amber-400">{{ example_account_id }}</span>&amp;field=<span class="text-amber-400">balance</span>
                        </a>
                    </div>

                    <!-- Example 3: Available Funds -->
                    <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                        <div class="flex flex-row items-center justify-between mb-2">
                            <p class="text-xs font-semibold text-surface-400">Get available funds</p>
                            <button onclick="tryExample(this)" class="flex flex-row items-center gap-1.5 text-xs text-brand-400 hover:text-brand-300 transition">
                                <i data-lucide="play" class="w-3.5 h-3.5"></i>
                                <span>Try it</span>
                            </button>
                        </div>
                        <a href="/api/account-details?api_key={{ api_key }}&arrissa_account_id={{ example_account_id }}&field=availableFunds"
                           target="_blank"
                           class="block font-mono text-sm text-surface-200 hover:text-brand-400 transition break-all">
                            GET /api/account-details?arrissa_account_id=<span class="text-amber-400">{{ example_account_id }}</span>&amp;field=<span class="text-amber-400">availableFunds</span>
                        </a>
                    </div>

                    <!-- Example 4: Projected Balance -->
                    <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                        <div class="flex flex-row items-center justify-between mb-2">
                            <p class="text-xs font-semibold text-surface-400">Get projected balance (equity)</p>
                            <button onclick="tryExample(this)" class="flex flex-row items-center gap-1.5 text-xs text-brand-400 hover:text-brand-300 transition">
                                <i data-lucide="play" class="w-3.5 h-3.5"></i>
                                <span>Try it</span>
                            </button>
                        </div>
                        <a href="/api/account-details?api_key={{ api_key }}&arrissa_account_id={{ example_account_id }}&field=projectedBalance"
                           target="_blank"
                           class="block font-mono text-sm text-surface-200 hover:text-brand-400 transition break-all">
                            GET /api/account-details?arrissa_account_id=<span class="text-amber-400">{{ example_account_id }}</span>&amp;field=<span class="text-amber-400">projectedBalance</span>
                        </a>
                    </div>

                    <!-- Example 5: Initial Margin Req -->
                    <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                        <div class="flex flex-row items-center justify-between mb-2">
                            <p class="text-xs font-semibold text-surface-400">Get initial margin requirement</p>
                            <button onclick="tryExample(this)" class="flex flex-row items-center gap-1.5 text-xs text-brand-400 hover:text-brand-300 transition">
                                <i data-lucide="play" class="w-3.5 h-3.5"></i>
                                <span>Try it</span>
                            </button>
                        </div>
                        <a href="/api/account-details?api_key={{ api_key }}&arrissa_account_id={{ example_account_id }}&field=initialMarginReq"
                           target="_blank"
                           class="block font-mono text-sm text-surface-200 hover:text-brand-400 transition break-all">
                            GET /api/account-details?arrissa_account_id=<span class="text-amber-400">{{ example_account_id }}</span>&amp;field=<span class="text-amber-400">initialMarginReq</span>
                        </a>
                    </div>

                    <!-- Example 6: Margin Before Warning -->
                    <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                        <div class="flex flex-row items-center justify-between mb-2">
                            <p class="text-xs font-semibold text-surface-400">Get margin before warning</p>
                            <button onclick="tryExample(this)" class="flex flex-row items-center gap-1.5 text-xs text-brand-400 hover:text-brand-300 transition">
                                <i data-lucide="play" class="w-3.5 h-3.5"></i>
                                <span>Try it</span>
                            </button>
                        </div>
                        <a href="/api/account-details?api_key={{ api_key }}&arrissa_account_id={{ example_account_id }}&field=marginBeforeWarning"
                           target="_blank"
                           class="block font-mono text-sm text-surface-200 hover:text-brand-400 transition break-all">
                            GET /api/account-details?arrissa_account_id=<span class="text-amber-400">{{ example_account_id }}</span>&amp;field=<span class="text-amber-400">marginBeforeWarning</span>
                        </a>
                    </div>

                    <!-- Example 7: Open PnL -->
                    <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                        <div class="flex flex-row items-center justify-between mb-2">
                            <p class="text-xs font-semibold text-surface-400">Get open gross PnL</p>
                            <button onclick="tryExample(this)" class="flex flex-row items-center gap-1.5 text-xs text-brand-400 hover:text-brand-300 transition">
                                <i data-lucide="play" class="w-3.5 h-3.5"></i>
                                <span>Try it</span>
                            </button>
                        </div>
                        <a href="/api/account-details?api_key={{ api_key }}&arrissa_account_id={{ example_account_id }}&field=openGrossPnL"
                           target="_blank"
                           class="block font-mono text-sm text-surface-200 hover:text-brand-400 transition break-all">
                            GET /api/account-details?arrissa_account_id=<span class="text-amber-400">{{ example_account_id }}</span>&amp;field=<span class="text-amber-400">openGrossPnL</span>
                        </a>
                    </div>

                    <!-- Example 8: Open Net PnL -->
                    <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                        <div class="flex flex-row items-center justify-between mb-2">
                            <p class="text-xs font-semibold text-surface-400">Get open net PnL (after commissions)</p>
                            <button onclick="tryExample(this)" class="flex flex-row items-center gap-1.5 text-xs text-brand-400 hover:text-brand-300 transition">
                                <i data-lucide="play" class="w-3.5 h-3.5"></i>
                                <span>Try it</span>
                            </button>
                        </div>
                        <a href="/api/account-details?api_key={{ api_key }}&arrissa_account_id={{ example_account_id }}&field=openNetPnL"
                           target="_blank"
                           class="block font-mono text-sm text-surface-200 hover:text-brand-400 transition break-all">
                            GET /api/account-details?arrissa_account_id=<span class="text-amber-400">{{ example_account_id }}</span>&amp;field=<span class="text-amber-400">openNetPnL</span>
                        </a>
                    </div>

                    <!-- Example 9: Positions Count -->
                    <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                        <div class="flex flex-row items-center justify-between mb-2">
                            <p class="text-xs font-semibold text-surface-400">Get number of open positions</p>
                            <button onclick="tryExample(this)" class="flex flex-row items-center gap-1.5 text-xs text-brand-400 hover:text-brand-300 transition">
                                <i data-lucide="play" class="w-3.5 h-3.5"></i>
                                <span>Try it</span>
                            </button>
                        </div>
                        <a href="/api/account-details?api_key={{ api_key }}&arrissa_account_id={{ example_account_id }}&field=positionsCount"
                           target="_blank"
                           class="block font-mono text-sm text-surface-200 hover:text-brand-400 transition break-all">
                            GET /api/account-details?arrissa_account_id=<span class="text-amber-400">{{ example_account_id }}</span>&amp;field=<span class="text-amber-400">positionsCount</span>
                        </a>
                    </div>

                    <!-- Example 10: Today's Net PnL -->
                    <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                        <div class="flex flex-row items-center justify-between mb-2">
                            <p class="text-xs font-semibold text-surface-400">Get today's net PnL</p>
                            <button onclick="tryExample(this)" class="flex flex-row items-center gap-1.5 text-xs text-brand-400 hover:text-brand-300 transition">
                                <i data-lucide="play" class="w-3.5 h-3.5"></i>
                                <span>Try it</span>
                            </button>
                        </div>
                        <a href="/api/account-details?api_key={{ api_key }}&arrissa_account_id={{ example_account_id }}&field=todayNet"
                           target="_blank"
                           class="block font-mono text-sm text-surface-200 hover:text-brand-400 transition break-all">
                            GET /api/account-details?arrissa_account_id=<span class="text-amber-400">{{ example_account_id }}</span>&amp;field=<span class="text-amber-400">todayNet</span>
                        </a>
                    </div>

                    <!-- Example 11: Margin Warning Level -->
                    <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                        <div class="flex flex-row items-center justify-between mb-2">
                            <p class="text-xs font-semibold text-surface-400">Get margin warning level</p>
                            <button onclick="tryExample(this)" class="flex flex-row items-center gap-1.5 text-xs text-brand-400 hover:text-brand-300 transition">
                                <i data-lucide="play" class="w-3.5 h-3.5"></i>
                                <span>Try it</span>
                            </button>
                        </div>
                        <a href="/api/account-details?api_key={{ api_key }}&arrissa_account_id={{ example_account_id }}&field=marginWarningLevel"
                           target="_blank"
                           class="block font-mono text-sm text-surface-200 hover:text-brand-400 transition break-all">
                            GET /api/account-details?arrissa_account_id=<span class="text-amber-400">{{ example_account_id }}</span>&amp;field=<span class="text-amber-400">marginWarningLevel</span>
                        </a>
                    </div>

                    <!-- Example 12: Orders Count -->
                    <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                        <div class="flex flex-row items-center justify-between mb-2">
                            <p class="text-xs font-semibold text-surface-400">Get pending orders count</p>
                            <button onclick="tryExample(this)" class="flex flex-row items-center gap-1.5 text-xs text-brand-400 hover:text-brand-300 transition">
                                <i data-lucide="play" class="w-3.5 h-3.5"></i>
                                <span>Try it</span>
                            </button>
                        </div>
                        <a href="/api/account-details?api_key={{ api_key }}&arrissa_account_id={{ example_account_id }}&field=ordersCount"
                           target="_blank"
                           class="block font-mono text-sm text-surface-200 hover:text-brand-400 transition break-all">
                            GET /api/account-details?arrissa_account_id=<span class="text-amber-400">{{ example_account_id }}</span>&amp;field=<span class="text-amber-400">ordersCount</span>
                        </a>
                    </div>

                    <!-- Example 13: cURL — full state -->
                    <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                        <div class="flex flex-row items-center justify-between mb-2">
                            <p class="text-xs font-semibold text-surface-400">cURL — full account state with headers</p>
                            <button onclick="copyCurl()" class="flex flex-row items-center gap-1.5 text-xs text-brand-400 hover:text-brand-300 transition">
                                <i data-lucide="copy" class="w-3.5 h-3.5"></i>
                                <span>Copy</span>
                            </button>
                        </div>
                        <pre id="curlExample" class="text-sm overflow-x-auto"><code class="language-bash">curl -H "X-API-Key: {{ api_key }}" \
     -H "X-Arrissa-Account-Id: {{ example_account_id or 'ACCT_ID' }}" \
     "{{ site_url }}/api/account-details"</code></pre>
                    </div>

                    <!-- Example 14: cURL — single field -->
                    <div class="bg-surface-800 border border-surface-700 rounded-xl p-4">
                        <div class="flex flex-row items-center justify-between mb-2">
                            <p class="text-xs font-semibold text-surface-400">cURL — single field (balance)</p>
                            <button onclick="copyCurl2()" class="flex flex-row items-center gap-1.5 text-xs text-brand-400 hover:text-brand-300 transition">
                                <i data-lucide="copy" class="w-3.5 h-3.5"></i>
                                <span>Copy</span>
                            </button>
                        </div>
                        <pre id="curlExample2" class="text-sm overflow-x-auto"><code class="language-bash">curl -H "X-API-Key: {{ api_key }}" \
     -H "X-Arrissa-Account-Id: {{ example_account_id or 'ACCT_ID' }}" \
     "{{ site_url }}/api/account-details?field=balance"</code></pre>
                    </div>

                </div>
            </div>

            <!-- Error Responses -->
            <div>
                <p class="text-xs font-semibold text-surface-400 uppercase tracking-wider mb-3">Error Responses</p>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="text-xs uppercase tracking-widest text-surface-400 border-b border-surface-800">
                                <th class="text-left py-3 px-4 font-semibold">Code</th>
                                <th class="text-left py-3 px-4 font-semibold">Reason</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-surface-800">
                            <tr>
                                <td class="py-3 px-4"><span class="text-xs font-mono px-2.5 py-1 rounded-lg bg-red-900/40 text-red-400 font-semibold">401</span></td>
                                <td class="py-3 px-4 text-sm text-surface-300">Missing or invalid API key</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-4"><span class="text-xs font-mono px-2.5 py-1 rounded-lg bg-red-900/40 text-red-400 font-semibold">400</span></td>
                                <td class="py-3 px-4 text-sm text-surface-300">Missing arrissa_account_id or unknown field name</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-4"><span class="text-xs font-mono px-2.5 py-1 rounded-lg bg-amber-900/40 text-amber-400 font-semibold">404</span></td>
                                <td class="py-3 px-4 text-sm text-surface-300">Account not found for this user</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-4"><span class="text-xs font-mono px-2.5 py-1 rounded-lg bg-amber-900/40 text-amber-400 font-semibold">502</span></td>
                                <td class="py-3 px-4 text-sm text-surface-300">Failed to reach TradeLocker — token may be expired</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>

</div>

<script>
function tryExample(btn) {
    const link = btn.closest('.bg-surface-800').querySelector('a');
    if (link) window.open(link.href, '_blank');
}
function copyCurl() {
    const text = document.getElementById('curlExample').textContent;
    navigator.clipboard.writeText(text).then(() => {
        const btn = document.querySelector('[onclick="copyCurl()"] span');
        const orig = btn.textContent;
        btn.textContent = 'Copied';
        setTimeout(() => btn.textContent = orig, 2000);
    });
}
function copyCurl2() {
    const text = document.getElementById('curlExample2').textContent;
    navigator.clipboard.writeText(text).then(() => {
        const btn = document.querySelector('[onclick="copyCurl2()"] span');
        const orig = btn.textContent;
        btn.textContent = 'Copied';
        setTimeout(() => btn.textContent = orig, 2000);
    });
}
</script>

{% endblock %}
